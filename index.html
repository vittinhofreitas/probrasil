<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Governança ProBrasil Nordeste</title>
    
    <!-- Bibliotecas Externas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        
        /* Utilitários Visuais */
        .chart-container { position: relative; height: 300px; width: 100%; }
        .slide-content { animation: fadeIn 0.5s ease-out; height: 100%; display: flex; flex-direction: column; justify-content: center; }
        
        /* Estilo das Imagens */
        .img-overlay { 
            position: relative; overflow: hidden; border-radius: 24px; 
            height: 100%; min-height: 300px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); 
            background-color: #e2e8f0; 
        }
        .img-placeholder { width: 100%; height: 100%; object-fit: cover; transition: transform 0.7s; }
        .img-overlay:hover .img-placeholder { transform: scale(1.05); }
        .img-caption { 
            position: absolute; bottom: 0; left: 0; right: 0; padding: 20px; 
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); 
            color: white; font-weight: 700; letter-spacing: 0.5px; 
        }
        
        /* Estilo para imagem não encontrada (Fallback) */
        img[src=""], img[src="#"], img[src*="undefined"] { display: none; }
        .img-overlay.missing-img { 
            display: flex; align-items: center; justify-content: center; flex-direction: column;
            background-color: #f1f5f9; color: #94a3b8; font-weight: bold; 
            text-align: center; padding: 20px; border: 2px dashed #cbd5e1; 
        }
        
        /* Animações e Botões */
        .podium-item { transition: transform 0.3s; }
        .podium-item:hover { transform: translateY(-10px); }
        .lang-btn.active { background-color: #2563eb; color: white; border-color: #2563eb; }
        .card-stat { background: white; border-radius: 20px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); border: 1px solid #f1f5f9; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="overflow-x-hidden text-slate-900">

    <!-- ================= DASHBOARD VIEW ================= -->
    <div id="dashboard-view" class="min-h-screen flex flex-col">
        <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <img src="https://img1.wsimg.com/isteam/ip/c12329ff-4adf-463c-918b-b23fd6da22ab/logo-probrasil-nordeste.png" alt="ProBrasil Logo" class="h-10 object-contain">
                <div class="h-8 w-px bg-slate-200"></div>
                <div>
                    <h1 class="text-lg font-bold text-slate-800 leading-tight t-app-title">Painel de Governança</h1>
                    <p class="text-xs text-slate-400 font-medium t-app-subtitle">Relatório Integrado 2025</p>
                </div>
            </div>

            <div class="flex items-center space-x-6">
                <!-- Seletor de Idioma -->
                <div class="flex bg-slate-100 p-1 rounded-xl border border-slate-200 shadow-inner">
                    <button onclick="setLang('pt')" id="lang-pt" class="lang-btn px-3 py-1 rounded-lg text-xs font-bold transition-all active">PT</button>
                    <button onclick="setLang('en')" id="lang-en" class="lang-btn px-3 py-1 rounded-lg text-xs font-bold transition-all">EN</button>
                    <button onclick="setLang('de')" id="lang-de" class="lang-btn px-3 py-1 rounded-lg text-xs font-bold transition-all">DE</button>
                </div>
                
                <button onclick="toggleView('presentation')" class="group flex items-center space-x-3 bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-all font-bold shadow-lg shadow-blue-200 active:scale-95">
                    <i data-lucide="play-circle" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                    <span class="t-btn-start">Iniciar Apresentação</span>
                </button>
            </div>
        </header>

        <main class="flex-grow p-8 max-w-[1600px] mx-auto w-full space-y-8">
            <!-- KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="card-stat relative overflow-hidden group">
                    <div class="absolute top-0 right-0 bg-emerald-100 text-emerald-800 text-[10px] font-bold px-3 py-1 rounded-bl-xl t-tag-audited">AUDITADO</div>
                    <div class="p-3 rounded-xl bg-emerald-50 text-emerald-600 w-fit mb-4 group-hover:scale-110 transition-transform"><i data-lucide="wallet" class="w-6 h-6"></i></div>
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1 t-kpi-in">Total Entradas</p>
                    <p class="text-3xl font-black text-slate-800 tracking-tight">R$ 357.459,74</p>
                </div>
                <div class="card-stat relative overflow-hidden group">
                    <div class="absolute top-0 right-0 bg-blue-100 text-blue-800 text-[10px] font-bold px-3 py-1 rounded-bl-xl t-tag-audited">AUDITADO</div>
                    <div class="p-3 rounded-xl bg-blue-50 text-blue-600 w-fit mb-4 group-hover:scale-110 transition-transform"><i data-lucide="trending-up" class="w-6 h-6"></i></div>
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1 t-kpi-out">Total Saídas</p>
                    <p class="text-3xl font-black text-slate-800 tracking-tight">R$ 347.096,94</p>
                </div>
                <div class="card-stat group">
                    <div class="p-3 rounded-xl bg-slate-900 text-white w-fit mb-4 group-hover:scale-110 transition-transform"><i data-lucide="piggy-bank" class="w-6 h-6"></i></div>
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1 t-kpi-balance">Saldo em Caixa</p>
                    <p class="text-3xl font-black text-emerald-600 tracking-tight">+ R$ 10.362,80</p>
                </div>
                <div class="card-stat group">
                    <div class="p-3 rounded-xl bg-amber-50 text-amber-600 w-fit mb-4 group-hover:scale-110 transition-transform"><i data-lucide="award" class="w-6 h-6"></i></div>
                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1 t-kpi-social">Impacto Social</p>
                    <p class="text-3xl font-black text-slate-800 t-kpi-social-val">+700 Beneficiários</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 card-stat">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-slate-800 t-chart-title">Fluxo de Caixa Mensal</h3>
                        <div class="flex space-x-4 text-sm font-semibold">
                            <span class="flex items-center"><div class="w-3 h-3 rounded-full bg-emerald-500 mr-2"></div><span class="t-legend-in">Entradas</span></span>
                            <span class="flex items-center"><div class="w-3 h-3 rounded-full bg-blue-500 mr-2"></div><span class="t-legend-out">Saídas</span></span>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>

                <div class="card-stat flex flex-col">
                    <h3 class="text-xl font-bold text-slate-800 mb-6 t-highlights-title">Destaques Estratégicos</h3>
                    <div id="timeline-list" class="space-y-6 flex-grow overflow-y-auto pr-2 custom-scrollbar text-sm font-medium">
                        <!-- Javascript Injected -->
                    </div>
                    <button onclick="downloadCSV()" class="w-full mt-6 py-4 bg-slate-50 rounded-xl text-sm font-bold text-slate-500 hover:text-blue-600 hover:bg-blue-50 transition-all flex items-center justify-center space-x-2 border border-slate-100 cursor-pointer">
                        <i data-lucide="download" class="w-4 h-4"></i>
                        <span class="t-btn-download">Baixar Relatório (CSV)</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- ================= PRESENTATION VIEW (18 SLIDES) ================= -->
    <div id="presentation-view" class="hidden h-screen w-screen flex flex-col bg-slate-50 fixed top-0 left-0 z-[100]">
        <!-- Barra de Progresso -->
        <div class="h-1 bg-slate-200 w-full">
            <div id="progress-bar" class="h-full bg-blue-600 transition-all duration-300" style="width: 0%"></div>
        </div>

        <div class="px-8 py-4 flex justify-between items-center bg-white border-b border-slate-200 shadow-sm">
            <div class="flex items-center space-x-4">
                <img src="https://img1.wsimg.com/isteam/ip/c12329ff-4adf-463c-918b-b23fd6da22ab/logo-probrasil-nordeste.png" alt="ProBrasil" class="h-8 object-contain">
                <div class="h-4 w-px bg-slate-300"></div>
                <span id="slide-number-label" class="text-xs font-black tracking-widest text-slate-400 uppercase t-pres-label">Apresentação Executiva</span>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Seletor de Idioma na Apresentação -->
                <div class="flex bg-slate-100 p-1 rounded-xl border border-slate-200">
                    <button onclick="setLang('pt')" class="pres-lang-btn px-3 py-1 rounded-lg text-xs font-bold transition-all" data-l="pt">PT</button>
                    <button onclick="setLang('en')" class="pres-lang-btn px-3 py-1 rounded-lg text-xs font-bold transition-all" data-l="en">EN</button>
                    <button onclick="setLang('de')" class="pres-lang-btn px-3 py-1 rounded-lg text-xs font-bold transition-all" data-l="de">DE</button>
                </div>
                <button onclick="toggleView('dashboard')" class="flex items-center space-x-2 text-slate-500 hover:text-red-600 transition-colors font-bold text-sm bg-slate-100 px-4 py-2 rounded-full">
                    <span class="t-btn-close">Encerrar</span>
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            </div>
        </div>

        <div class="flex-grow relative overflow-hidden flex items-center justify-center p-8">
            <div id="slide-container" class="w-full h-full max-w-[1400px] max-h-[800px] bg-white rounded-[40px] shadow-2xl p-12 relative border border-white overflow-hidden">
                <!-- Conteúdo do Slide Injetado via JS -->
            </div>
        </div>

        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center space-x-6 bg-white/90 backdrop-blur px-8 py-4 rounded-full shadow-lg border border-slate-200">
            <button onclick="prevSlide()" class="p-3 hover:bg-slate-100 rounded-full transition-colors text-slate-600 cursor-pointer">
                <i data-lucide="chevron-left" class="w-8 h-8"></i>
            </button>
            <span class="text-sm font-black text-slate-400 select-none uppercase tracking-[0.2em] t-nav">Navegação</span>
            <button onclick="nextSlide()" class="p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 shadow-md transition-all transform hover:scale-110 active:scale-95 cursor-pointer">
                <i data-lucide="chevron-right" class="w-8 h-8"></i>
            </button>
        </div>
    </div>

    <!-- ================= LÓGICA E DADOS ================= -->
    <script>
        const totalSlides = 18; // FIX: Número total de slides definido explicitamente
        let currentLang = 'pt';
        let currentSlide = 0;

        // --- DICIONÁRIO DE TRADUÇÃO COMPLETO ---
        const translations = {
            pt: {
                appTitle: "Painel de Governança", appSubtitle: "Relatório Integrado 2025", btnStart: "Iniciar Apresentação", audited: "AUDITADO", kpiIn: "Total Entradas", kpiOut: "Total Saídas", kpiBalance: "Saldo em Caixa", kpiSocial: "Impacto Social", kpiSocialVal: "+700 Beneficiários", chartTitle: "Fluxo de Caixa Mensal", legendIn: "Entradas", legendOut: "Saídas", highlights: "Destaques Estratégicos", download: "Baixar Relatório (CSV)", presLabel: "Apresentação Executiva", close: "Encerrar", nav: "Navegação",
                slides: {
                    title1: "Relatório de Governança", subtitle1: "Resultados 2025", footer1: "Diretoria Executiva • Coronel José Dias, PI",
                    title2: "Números Consolidados", subtitle2: "Relatório Integrado de Gestão (Jan-Set)", efficiency: "97% de Eficiência: Quase a totalidade do recurso foi convertida em infraestrutura social e educacional direta.",
                    title3: "Fluxo de Caixa Mensal",
                    title4: "O Terreno", desc4: "Limpeza profunda e preparação do solo para a sede e expansões.", inv4: "Investimento em Limpeza (Fev/Mar)",
                    title5: "Renovação do Prédio JK", desc5: "Pintura externa e interna finalizada (Jan-Abr). Património vital revitalizado para acolher projetos e a comunidade.",
                    title6: "Climatização e Conforto", highlight6_1: "AC 9000 BTUs Instalados", highlight6_2: "Reparos Hidráulicos Finais",
                    title7: "Infraestrutura Digital", desc7: "Upgrade realizado em Julho e Agosto. Laboratório 100% equipado para o Projeto Criando Futuro.", inv7: "Investimento em TI",
                    title8: "Segurança Alimentar", desc8: "Distribuição emergencial de alimentos realizada em Fevereiro para as famílias atendidas.", inv8: "R$ 4.000,00 Doação Direta",
                    title9: "Projeto Criando Futuro", subtitle9: "Inclusão no Sertão", desc9: "Capacitação intensiva de jovens e adultos, unindo educação ao desenvolvimento do Piauí.",
                    title10: "Projeto PRACTICE", desc10: "Aliança estratégica com a GIZ (Alemanha) e o Hospital ukb de Berlim para salvaguardar vidas.", check10_1: "Prevenção de Traumas Infantis", check10_2: "Treinamentos de Urgência",
                    title11: "PRACTICE: Impacto", desc11: "Educação preventiva abrangente para crianças e pais sobre segurança no trânsito e traumas domiciliares.", label11: "Alunos Atendidos",
                    title12: "PRACTICE: Saúde", desc12: "Capacitação técnica em urgência e emergência para equipas de saúde de São Raimundo Nonato e região.", label12: "Profissionais Treinados",
                    title13: "Pódio de Março", pod1: "Preparo Académico ukb Berlim", pod2: "Visitas Técnicas Fortaleza", pod3: "Mapeamento Serra da Capivara", podQuote: "Mês fundamental de estruturação acadêmica e logística.",
                    title14: "Gestão de Logística",
                    title15: "Conformidade e Gestão", check15_1: "Contabilidade R&R em Dia", check15_2: "Taxas Legais e Cartoriais", check15_3: "Conectividade 100% Online", card15: "Gestão 100% Regular",
                    title16: "Rigor e Transparência", desc16: "9 meses de lançamentos auditados e documentados para prestação de contas absoluta.", card16_1: "Recibos Auditados", card16_2: "Notas Fiscais Validadas", card16_3: "Conciliação Jan-Set",
                    title17: "Eficiência em Tempo Real", desc17: "Manutenção da rede para Hostel JK, Centro Ambiental e Panificadora.", support: "Suporte Contínuo", supportDesc: "Operação ininterrupta.", remote: "Gestão Remota", remoteDesc: "Monitoramento em tempo real.",
                    title18: "O Impacto é Visível", quote18: "Transformando cada real investido em futuro para o Sertão do Piauí.", footer18: "Responsabilidade • Transparência • Eficiência"
                }
            },
            en: {
                appTitle: "Governance Dashboard", appSubtitle: "Integrated Report 2025", btnStart: "Start Presentation", audited: "AUDITED", kpiIn: "Total Inflow", kpiOut: "Total Outflow", kpiBalance: "Cash Balance", kpiSocial: "Social Impact", kpiSocialVal: "+700 Beneficiaries", chartTitle: "Monthly Cash Flow", legendIn: "Inflows", legendOut: "Outflows", highlights: "Strategic Highlights", download: "Download Report (CSV)", presLabel: "Executive Presentation", close: "Close", nav: "Navigation",
                slides: {
                    title1: "Governance Report", subtitle1: "Results 2025", footer1: "Executive Board • Coronel José Dias, PI",
                    title2: "Consolidated Numbers", subtitle2: "Integrated Management Report (Jan-Sep)", efficiency: "97% Efficiency: Almost all resources were converted into direct social and educational infrastructure.",
                    title3: "Monthly Cash Flow",
                    title4: "The Land", desc4: "Deep cleaning and soil preparation for the headquarters and expansions.", inv4: "Cleaning Investment (Feb/Mar)",
                    title5: "JK Building Renovation", desc5: "External and internal painting completed (Jan-Apr). Vital heritage revitalized to host projects and the community.",
                    title6: "Climatization and Comfort", highlight6_1: "9000 BTUs AC Units Installed", highlight6_2: "Final Hydraulic Repairs",
                    title7: "Digital Infrastructure", desc7: "Upgrade completed in July and August. Laboratory 100% equipped for the Creating Future Project.", inv7: "IT Investment",
                    title8: "Food Security", desc8: "Emergency food distribution carried out in February for the families served.", inv8: "R$ 4,000.00 Direct Donation",
                    title9: "Creating Future Project", subtitle9: "Inclusion in the Sertão", desc9: "Intensive training for youth and adults, linking education to the development of Piauí.",
                    title10: "PRACTICE Project", desc10: "Strategic alliance with GIZ (Germany) and ukb Hospital Berlin to safeguard lives.", check10_1: "Childhood Trauma Prevention", check10_2: "Emergency Training",
                    title11: "PRACTICE: Impact", desc11: "Comprehensive preventive education for children and parents on traffic safety and home traumas.", label11: "Students Served",
                    title12: "PRACTICE: Health", desc12: "Technical training in urgency and emergency for health teams in São Raimundo Nonato and region.", label12: "Professionals Trained",
                    title13: "March Podium", pod1: "Academic Prep ukb Berlin", pod2: "Technical Visits Fortaleza", pod3: "Serra da Capivara Mapping", podQuote: "A fundamental month for academic and logistical structuring.",
                    title14: "Logistics Management",
                    title15: "Compliance and Management", check15_1: "Accounting (R&R) Up to Date", check15_2: "Legal Fees and Notary Fees", check15_3: "100% Online Connectivity", card15: "100% Regular Management",
                    title16: "Rigor and Transparency", desc16: "9 months of audited and documented transactions for absolute accountability.", card16_1: "Audited Receipts", card16_2: "Validated Invoices", card16_3: "Conciliation Jan-Sep",
                    title17: "Real-Time Efficiency", desc17: "Network maintenance for Hostel JK, Environmental Center and Bakery.", support: "Continuous Support", supportDesc: "Uninterrupted operation.", remote: "Remote Management", remoteDesc: "Real-time monitoring.",
                    title18: "The Impact is Visible", quote18: "Transforming every invested real into a future for the Piauí Sertão.", footer18: "Responsibility • Transparency • Efficiency"
                }
            },
            de: {
                appTitle: "Governance-Dashboard", appSubtitle: "Integrierter Bericht 2025", btnStart: "Präsentation Starten", audited: "GEPRÜFT", kpiIn: "Einnahmen Gesamt", kpiOut: "Ausgaben Gesamt", kpiBalance: "Kassenbestand", kpiSocial: "Soziale Wirkung", kpiSocialVal: "+700 Begünstigte", chartTitle: "Monatlicher Cashflow", legendIn: "Einnahmen", legendOut: "Ausgaben", highlights: "Strategische Highlights", download: "Bericht Herunterladen (CSV)", presLabel: "Vorstandspräsentation", close: "Beenden", nav: "Navigation",
                slides: {
                    title1: "Governance-Bericht", subtitle1: "Ergebnisse 2025", footer1: "Vorstand • Coronel José Dias, PI",
                    title2: "Konsolidierte Zahlen", subtitle2: "Integrierter Managementbericht (Jan-Sep)", efficiency: "97% Effizienz: Fast alle Mittel wurden direkt in soziale und pädagogische Infrastruktur umgewandelt.",
                    title3: "Monatlicher Cashflow",
                    title4: "Das Grundstück", desc4: "Tiefenreinigung und Bodenvorbereitung für den Hauptsitz und Erweiterungen.", inv4: "Reinigungsinvestition (Feb/März)",
                    title5: "JK-Gebäude Renovierung", desc5: "Außen- und Innenanstrich abgeschlossen (Jan-Apr). Vitales Erbe revitalisiert für Projekte und die Gemeinschaft.",
                    title6: "Klimatisierung und Komfort", highlight6_1: "9000 BTUs Klimageräte Installiert", highlight6_2: "Letzte Hydraulische Reparaturen",
                    title7: "Digitale Infrastruktur", desc7: "Upgrade im Juli und August abgeschlossen. Labor zu 100 % für das Projekt 'Zukunft Gestalten' ausgestattet.", inv7: "IT-Investition",
                    title8: "Ernährungssicherheit", desc8: "Notfall-Lebensmittelverteilung im Februar für die betreuten Familien durchgeführt.", inv8: "R$ 4.000,00 Direktspende",
                    title9: "Projekt Zukunft Gestalten", subtitle9: "Inklusion im Sertão", desc9: "Intensive Schulung für Jugendliche und Erwachsene, die Bildung mit der Entwicklung von Piauí verbindet.",
                    title10: "PRACTICE Projekt", desc10: "Strategische Allianz mit der GIZ (Deutschland) und dem ukb Krankenhaus Berlin zum Schutz von Leben.", check10_1: "Prävention von Kindertrauma", check10_2: "Notfallschulungen",
                    title11: "PRACTICE: Wirkung", desc11: "Umfassende präventive Aufklärung für Kinder und Eltern über Verkehrssicherheit und häusliche Traumen.", label11: "Betreute Schüler",
                    title12: "PRACTICE: Gesundheit", desc12: "Technische Schulung in Dringlichkeit und Notfall für Gesundheitsteams in São Raimundo Nonato und Region.", label12: "Geschulte Fachkräfte",
                    title13: "Podium März", pod1: "Akademische Vorbereitung ukb Berlin", pod2: "Technische Besuche Fortaleza", pod3: "Serra da Capivara Kartierung", podQuote: "Ein grundlegender Monat für die akademische und logistische Strukturierung.",
                    title14: "Logistikmanagement",
                    title15: "Compliance und Management", check15_1: "Buchhaltung (R&R) auf aktuellem Stand", check15_2: "Rechts- und Notargebühren", check15_3: "100% Online-Konnektivität", card15: "100% Ordnungsgemäße Verwaltung",
                    title16: "Strenge und Transparenz", desc16: "9 Monate geprüfte und dokumentierte Transaktionen für absolute Rechenschaftspflicht.", card16_1: "Geprüfte Quittungen", card16_2: "Validierte Rechnungen", card16_3: "Abstimmung Jan-Sep",
                    title17: "Echtzeit-Effizienz", desc17: "Netzwerkwartung für Hostel JK, Umweltzentrum und Bäckerei.", support: "Kontinuierlicher Support", supportDesc: "Ununterbrochener Betrieb.", remote: "Fernverwaltung", remoteDesc: "Echtzeit-Überwachung.",
                    title18: "Die Wirkung ist Sichtbar", quote18: "Jeden investierten Real in eine Zukunft für den Sertão von Piauí verwandeln.", footer18: "Verantwortung • Transparenz • Effizienz"
                }
            }
        };

        function setLang(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            document.querySelectorAll('.lang-btn, .pres-lang-btn').forEach(btn => {
                const btnId = btn.getAttribute('id');
                const btnData = btn.dataset.l;
                btn.classList.toggle('active', btnId === `lang-${lang}` || btnData === lang);
            });
            
            // Atualização de textos estáticos
            document.querySelector('.t-app-title').innerText = t.appTitle;
            document.querySelector('.t-app-subtitle').innerText = t.appSubtitle;
            document.querySelector('.t-btn-start').innerText = t.btnStart;
            document.querySelectorAll('.t-tag-audited').forEach(el => el.innerText = t.audited);
            document.querySelector('.t-kpi-in').innerText = t.kpiIn;
            document.querySelector('.t-kpi-out').innerText = t.kpiOut;
            document.querySelector('.t-kpi-balance').innerText = t.kpiBalance;
            document.querySelector('.t-kpi-social').innerText = t.kpiSocial;
            document.querySelector('.t-kpi-social-val').innerText = t.kpiSocialVal;
            document.querySelector('.t-chart-title').innerText = t.chartTitle;
            document.querySelector('.t-legend-in').innerText = t.legendIn;
            document.querySelector('.t-legend-out').innerText = t.legendOut;
            document.querySelector('.t-highlights-title').innerText = t.highlights;
            document.querySelector('.t-btn-download').innerText = t.download;
            document.querySelector('.t-pres-label').innerText = t.presLabel;
            document.querySelector('.t-btn-close').innerText = t.close;
            document.querySelector('.t-nav').innerText = t.nav;

            initTimeline(); // Recarrega destaques
            // Se estiver no modo apresentação, recarrega o slide atual
            if (document.getElementById('presentation-view').classList.contains('active-view')) { 
                renderSlide(); 
            }
        }

        // --- DADOS REAIS ---
        const dataConsolidada = [
            { mes: 'Jan', entradas: 6156.82, saidas: 5000.00, destaque: {pt: 'Reforma JK', en: 'JK Renovation', de: 'JK Renovierung'}, info: 'Início das pinturas' },
            { mes: 'Fev', entradas: 41189.74, saidas: 43969.48, destaque: {pt: 'Ação Social', en: 'Social Action', de: 'Soziale Aktion'}, info: 'Cestas Básicas' },
            { mes: 'Mar', entradas: 53531.08, saidas: 56981.04, destaque: {pt: 'PRACTICE Março', en: 'PRACTICE March', de: 'PRACTICE März'}, info: 'Início do Programa' },
            { mes: 'Abr', entradas: 27290.53, saidas: 25252.15, destaque: {pt: 'Manutenção', en: 'Maintenance', de: 'Wartung'}, info: 'Centro Ambiental' },
            { mes: 'Mai', entradas: 25653.60, saidas: 31184.00, destaque: {pt: 'Criando Futuro', en: 'Creating Future', de: 'Zukunft Gestalten'}, info: 'Capacitação' },
            { mes: 'Jun', entradas: 56991.34, saidas: 31810.50, destaque: {pt: 'PRACTICE Junho', en: 'PRACTICE June', de: 'PRACTICE Juni'}, info: 'Visitas Técnicas' },
            { mes: 'Jul', entradas: 86701.22, saidas: 30523.11, destaque: {pt: 'Inclusão Digital', en: 'Digital Inclusion', de: 'Digitale Inklusion'}, info: 'Upgrade TI' },
            { mes: 'Ago', entradas: 53800.91, saidas: 80611.38, destaque: {pt: 'Infraestrutura', en: 'Infrastructure', de: 'Infrastruktur'}, info: 'Finalização Elétrica' },
            { mes: 'Set', entradas: 6144.50, saidas: 41765.28, destaque: {pt: 'Governança', en: 'Governance', de: 'Governance'}, info: 'Gestão Ativa' },
        ];

        function getImg(src, label) {
            return `<div class="img-overlay h-full w-full relative">
                <img src="./${src}" class="img-placeholder" onerror="this.parentElement.classList.add('missing-img')">
                <div class="absolute inset-0 flex items-center justify-center text-slate-400 font-bold text-center p-4" style="z-index:-1">FOTO: ${src}<br>${label}</div>
                <div class="img-caption">${label}</div>
            </div>`;
        }

        // --- CONTEÚDO DOS 18 SLIDES DINÂMICOS ---
        function getSlideContent(idx) {
            const t = translations[currentLang].slides;
            const content = [
                // 1. Capa
                `<div class="flex flex-col items-center justify-center h-full text-center space-y-8 animate-in fade-in zoom-in duration-700">
                    <div class="p-10 bg-slate-50 rounded-[2rem] border border-slate-100 shadow-sm"><img src="https://img1.wsimg.com/isteam/ip/c12329ff-4adf-463c-918b-b23fd6da22ab/logo-probrasil-nordeste.png" class="h-48 object-contain"></div>
                    <div><h1 class="text-6xl font-black text-slate-900 tracking-tight mb-4 uppercase leading-none">${t.title1}</h1><div class="inline-block bg-blue-600 text-white text-xl font-bold px-6 py-2 rounded-full tracking-widest uppercase mt-4">${t.subtitle1}</div></div>
                    <p class="text-slate-400 font-bold uppercase tracking-widest mt-8">${t.footer1}</p>
                </div>`,
                // 2. Visão Geral
                `<div class="flex flex-col justify-center h-full max-w-5xl mx-auto w-full">
                    <h2 class="text-4xl font-bold text-slate-800 mb-2 text-center uppercase tracking-tight">${t.title2}</h2>
                    <p class="text-slate-500 mb-12 text-xl text-center">${t.subtitle2}</p>
                    <div class="grid grid-cols-3 gap-8">
                        <div class="card-stat border-l-8 border-emerald-500"><p class="text-emerald-600 font-bold uppercase text-xs mb-2">PT: Entradas</p><p class="text-4xl font-black text-emerald-700 tracking-tight">R$ 357.459,74</p></div>
                        <div class="card-stat border-l-8 border-blue-500"><p class="text-blue-600 font-bold uppercase text-xs mb-2">PT: Saídas</p><p class="text-4xl font-black text-blue-700 tracking-tight">R$ 347.096,94</p></div>
                        <div class="card-stat border-l-8 border-slate-800 bg-slate-900 text-white"><p class="text-slate-400 font-bold uppercase text-xs mb-2">PT: Saldo</p><p class="text-4xl font-black text-white tracking-tight">+ R$ 10.362,80</p></div>
                    </div>
                    <div class="mt-12 p-8 bg-blue-50 rounded-2xl border border-blue-100 flex items-center space-x-6 shadow-sm"><i data-lucide="info" class="text-blue-600 w-12 h-12"></i><p class="text-blue-900 font-medium text-xl leading-relaxed">${t.efficiency}</p></div>
                </div>`,
                // 3. Gráfico
                `<div class="flex flex-col h-full w-full max-w-6xl mx-auto"><h2 class="text-4xl font-black text-slate-800 mb-8 text-center uppercase tracking-tight">${translations[currentLang].chartTitle}</h2><div class="flex-grow relative w-full"><canvas id="slideChart"></canvas></div></div>`,
                // 4. Terreno
                `<div class="grid grid-cols-2 gap-12 h-full items-center">
                    <div class="space-y-8"><h2 class="text-5xl font-black text-slate-900 leading-tight">${t.title4}</h2><p class="text-xl text-slate-600 leading-relaxed italic font-medium">"${t.desc4}"</p><div class="p-6 bg-slate-50 rounded-2xl border border-slate-100 w-fit"><p class="text-3xl font-black text-slate-800">R$ 4.000,00+</p><p class="text-sm text-slate-400 font-bold uppercase">${t.inv4}</p></div></div>
                    <div class="grid grid-rows-2 gap-6 h-full max-h-[600px]">${getImg('1.jpg', 'BEFORE')}${getImg('2.jpg', 'AFTER')}</div>
                </div>`,
                // 5. Prédio JK Fachada
                `<div class="grid grid-cols-12 gap-8 h-full items-center">
                    <div class="col-span-6 h-[550px]">${getImg('3.jpg', 'FACADE')}</div>
                    <div class="col-span-6 space-y-8 pl-4"><h2 class="text-4xl font-black text-slate-800 tracking-tight uppercase leading-none">${t.title5}</h2><p class="text-lg text-slate-600 leading-relaxed font-medium">${t.desc5}</p></div>
                </div>`,
                // 6. Prédio JK Interno
                `<div class="flex flex-col h-full justify-center"><h2 class="text-4xl font-black text-slate-800 mb-8 text-center uppercase tracking-tight">${t.title6}</h2><div class="grid grid-cols-3 gap-8 h-[400px]">
                        ${getImg('4.jpg', 'AC UNITS')}${getImg('5.jpg', 'ELECTRICAL')}
                        <div class="card-stat flex flex-col justify-center space-y-6 bg-slate-50 border-none shadow-sm"><ul class="space-y-4 font-semibold text-slate-600"><li class="flex items-start space-x-3"><i data-lucide="check" class="text-emerald-500 mt-1"></i><span>${t.highlight6_1}</span></li><li class="flex items-start space-x-3"><i data-lucide="check" class="text-emerald-500 mt-1"></i><span>${t.highlight6_2}</span></li></ul></div>
                    </div></div>`,
                // 7. Centro Informática
                `<div class="grid grid-cols-2 gap-12 h-full items-center">
                    <div class="space-y-8"><h2 class="text-5xl font-black text-slate-900 leading-tight uppercase leading-none">${t.title7}</h2><p class="text-xl text-slate-600 leading-relaxed font-medium">${t.desc7}</p><div class="card-stat bg-blue-600 text-white p-10 border-none shadow-xl"><p class="text-blue-200 font-bold uppercase text-sm mb-2 tracking-widest">${t.inv7}</p><p class="text-5xl font-black tracking-tighter">R$ 38.000,00+</p></div></div>
                    ${getImg('6.jpg', 'IT LAB')}
                </div>`,
                // 8. Segurança Alimentar
                `<div class="grid grid-cols-2 gap-12 h-full items-center">${getImg('7.jpg', 'SOCIAL')}
                    <div class="space-y-8 text-right"><i data-lucide="heart" class="text-rose-500 w-16 h-16 ml-auto"></i><h2 class="text-4xl font-black text-slate-900 leading-tight uppercase">${t.title8}</h2><p class="text-xl text-slate-600 font-medium">${t.desc8}</p><p class="text-3xl font-black text-rose-600 tracking-tighter uppercase uppercase">${t.inv8}</p></div>
                </div>`,
                // 9. Projeto Criando Futuro
                `<div class="flex flex-col h-full justify-center max-w-6xl mx-auto w-full"><h2 class="text-4xl font-black text-slate-800 mb-10 text-center uppercase tracking-tight leading-none">${t.title9}</h2><div class="grid grid-cols-12 gap-8 h-[450px]">
                        <div class="col-span-8 h-full">${getImg('8.jpg', 'AULA DIGITAL')}</div>
                        <div class="col-span-4 flex flex-col justify-center space-y-6"><h3 class="text-2xl font-bold text-blue-700 italic">"${t.subtitle9}"</h3><p class="text-lg text-slate-600 font-medium leading-relaxed">${t.desc9}</p></div>
                    </div></div>`,
                // 10. PRACTICE VISÃO GERAL
                `<div class="grid grid-cols-2 gap-12 h-full items-center">
                    <div class="space-y-8"><h2 class="text-5xl font-black text-slate-900 leading-tight uppercase tracking-tighter">${t.title10}</h2><p class="text-xl text-slate-600 leading-relaxed font-medium">${t.desc10}</p>
                        <div class="grid grid-cols-2 gap-4"><div class="p-6 bg-white border-2 border-emerald-100 rounded-3xl shadow-sm"><p class="text-emerald-600 font-black text-3xl tracking-tighter">+500</p><p class="text-xs font-bold text-slate-400 uppercase">PT: Alunos</p></div><div class="p-6 bg-white border-2 border-blue-100 rounded-3xl shadow-sm"><p class="text-blue-600 font-black text-3xl tracking-tighter">228</p><p class="text-xs font-bold text-slate-400 uppercase">PT: Saúde</p></div></div></div>
                    <div class="grid grid-cols-2 grid-rows-2 gap-4 h-[500px]">${getImg('9.jpg', 'PRACTICE 1')}${getImg('10.jpg', 'PRACTICE 2')}${getImg('1.jpeg', 'PRACTICE 3')}${getImg('2.jpeg', 'PRACTICE 4')}</div>
                </div>`,
                // 11. PRACTICE IMPACTO PREVENÇÃO
                `<div class="flex flex-col h-full justify-center max-w-6xl mx-auto w-full"><div class="grid grid-cols-12 gap-8 h-[500px] items-center">
                        <div class="col-span-7 h-full grid grid-cols-2 gap-4">${getImg('3.jpeg', 'PRAC 7')}${getImg('4.jpeg', 'PRAC 8')}</div>
                        <div class="col-span-5 space-y-6 text-right"><i data-lucide="users" class="w-16 h-16 text-emerald-600 ml-auto"></i><h2 class="text-4xl font-black text-slate-900 uppercase leading-none">${t.title11}</h2><p class="text-xl text-slate-600 font-medium">${t.desc11}</p></div>
                    </div></div>`,
                // 12. PRACTICE IMPACTO SAÚDE
                `<div class="flex flex-col h-full justify-center max-w-6xl mx-auto w-full"><div class="grid grid-cols-12 gap-8 h-[500px] items-center">
                        <div class="col-span-5 space-y-6"><i data-lucide="activity" class="w-16 h-16 text-blue-600"></i><h2 class="text-4xl font-black text-slate-900 uppercase leading-none">${t.title12}</h2><p class="text-xl text-slate-600 font-medium">${t.desc12}</p></div>
                        <div class="col-span-7 h-full grid grid-cols-2 gap-4">${getImg('5.jpeg', 'PRAC 5')}${getImg('6.jpeg', 'PRAC 6')}</div>
                    </div></div>`,
                // 13. PÓDIO MARÇO (ICONS REPLACING IMAGES)
                `<div class="flex flex-col h-full justify-center max-w-6xl mx-auto w-full"><h2 class="text-4xl font-black text-slate-900 mb-10 text-center uppercase tracking-tighter">${t.title13}</h2><div class="flex justify-center items-end space-x-6 h-[400px]">
                        <div class="podium-item w-1/3 bg-slate-100 rounded-t-[3rem] p-8 flex flex-col items-center justify-end h-[70%] border border-slate-200"><div class="w-full h-32 mb-4 rounded-2xl flex items-center justify-center bg-slate-200"><i data-lucide="map-pin" class="w-12 h-12 text-slate-400"></i></div><span class="text-4xl font-black text-slate-300 mb-2">2º</span><h4 class="font-bold text-slate-700 text-center text-sm">${t.pod2}</h4></div>
                        <div class="podium-item w-1/3 bg-blue-600 rounded-t-[3rem] p-8 flex flex-col items-center justify-end h-full shadow-2xl"><div class="w-full h-40 mb-4 rounded-2xl flex items-center justify-center bg-blue-500"><i data-lucide="graduation-cap" class="w-16 h-16 text-white"></i></div><span class="text-5xl font-black text-blue-200 mb-2">1º</span><h4 class="font-black text-white text-center text-lg">${t.pod1}</h4></div>
                        <div class="podium-item w-1/3 bg-emerald-500 rounded-t-[3rem] p-8 flex flex-col items-center justify-end h-[85%] border border-emerald-400"><div class="w-full h-32 mb-4 rounded-2xl flex items-center justify-center bg-emerald-400"><i data-lucide="map" class="w-12 h-12 text-white"></i></div><span class="text-4xl font-black text-emerald-200 mb-2">3º</span><h4 class="font-bold text-white text-center text-xs">${t.pod3}</h4></div>
                    </div></div>`,
                // 14. Frota
                `<div class="flex flex-col h-full justify-center"><h2 class="text-4xl font-black text-slate-800 mb-10 text-center uppercase tracking-tight leading-none">${t.title14}</h2><div class="grid grid-cols-3 gap-8">
                        <div class="card-stat">${getImg('11.jpg', 'TORO')}<h3 class="font-bold text-slate-800 mt-4 text-xl">Fiat Toro</h3></div>
                        <div class="card-stat">${getImg('12.jpg', 'DOBLO')}<h3 class="font-bold text-slate-800 mt-4 text-xl">Fiat Doblo</h3></div>
                        <div class="card-stat">${getImg('13.jpg', 'MOTO')}<h3 class="font-bold text-slate-800 mt-4 text-xl">Moto Brós</h3></div>
                    </div></div>`,
                // 15. Conformidade
                `<div class="grid grid-cols-2 gap-12 h-full items-center max-w-6xl mx-auto"><div class="space-y-6"><h2 class="text-5xl font-black text-slate-900 leading-tight uppercase tracking-tighter leading-none">${t.title15}</h2><ul class="space-y-6 font-bold text-slate-600 text-xl"><li class="flex items-center space-x-4"><i data-lucide="check-circle" class="text-emerald-500"></i><span>${t.check15_1}</span></li><li class="flex items-center space-x-4"><i data-lucide="check-circle" class="text-emerald-500"></i><span>${t.check15_2}</span></li><li class="flex items-center space-x-4"><i data-lucide="check-circle" class="text-emerald-500"></i><span>${t.check15_3}</span></li></ul></div>
                    <div class="h-[400px] rounded-[3rem] bg-indigo-50 flex flex-col items-center justify-center p-12 text-center border-2 border-indigo-100 shadow-inner"><i data-lucide="file-check" class="w-24 h-24 text-indigo-300 mb-6"></i><h3 class="text-3xl font-black text-indigo-800 uppercase tracking-tighter">${t.card15}</h3></div>
                </div>`,
                // 16. Auditoria
                `<div class="max-w-4xl mx-auto text-center h-full flex flex-col justify-center"><i data-lucide="shield-check" class="w-20 h-20 text-emerald-600 mx-auto mb-8"></i><h2 class="text-5xl font-black text-slate-900 mb-6 tracking-tighter uppercase leading-tight">${t.title16}</h2><p class="text-2xl text-slate-500 mb-12 font-medium">${t.desc16}</p>
                    <div class="grid grid-cols-3 gap-6 text-left"><div class="card-stat border-t-4 border-emerald-500"><p class="font-bold text-slate-800 uppercase text-xs">${t.card16_1}</p></div><div class="card-stat border-t-4 border-emerald-500"><p class="font-bold text-slate-800 uppercase text-xs">${t.card16_2}</p></div><div class="card-stat border-t-4 border-emerald-500"><p class="font-bold text-slate-800 uppercase text-xs">${t.card16_3}</p></div></div>
                </div>`,
                // 17. Conectividade (NO IMAGES, JUST ICONS)
                `<div class="grid grid-cols-2 gap-12 h-full items-center max-w-5xl mx-auto"><div class="card-stat bg-slate-900 text-white p-10 border-none shadow-2xl"><i data-lucide="wifi" class="w-12 h-12 text-blue-400 mb-6"></i><h3 class="text-3xl font-bold mb-4 tracking-tighter">${t.title17}</h3><p class="text-slate-400">${t.desc17}</p></div>
                    <div class="space-y-6 flex flex-col justify-center">
                        <div class="p-6 bg-white rounded-2xl border border-slate-100 shadow-sm"><h4 class="font-bold text-slate-800 mb-2">${t.support}</h4><p class="text-slate-500 text-sm">${t.supportDesc}</p></div>
                        <div class="p-6 bg-white rounded-2xl border border-slate-100 shadow-sm"><h4 class="font-bold text-slate-800 mb-2">${t.remote}</h4><p class="text-slate-500 text-sm">${t.remoteDesc}</p></div>
                    </div></div>`,
                // 18. Conclusão
                `<div class="flex flex-col items-center justify-center h-full text-center space-y-10 max-w-4xl mx-auto animate-in fade-in duration-1000"><h2 class="text-7xl font-black text-slate-900 tracking-tighter uppercase leading-none">${t.title18}</h2><p class="text-3xl text-blue-600 font-bold max-w-2xl italic leading-relaxed">"${t.quote18}"</p>
                    <div class="p-10 bg-slate-900 rounded-[3rem] text-white w-full shadow-2xl"><h3 class="text-2xl font-bold mb-2">ProBrasil Nordeste 2025</h3><p class="text-slate-400 font-bold uppercase tracking-widest text-sm">${t.footer18}</p></div>
                </div>`
            ];
            return content[idx];
        }

        // --- LÓGICA DO SISTEMA ---
        function toggleView(view) {
            document.getElementById('dashboard-view').classList.toggle('hidden', view === 'presentation');
            document.getElementById('presentation-view').classList.toggle('hidden', view === 'dashboard');
            if (view === 'presentation') {
                document.getElementById('presentation-view').classList.add('active-view');
                currentSlide = 0;
                renderSlide();
                document.documentElement.requestFullscreen().catch(() => {});
            } else {
                document.getElementById('presentation-view').classList.remove('active-view');
                if (document.fullscreenElement) document.exitFullscreen();
            }
        }

        function renderSlide() {
            const container = document.getElementById('slide-container');
            container.innerHTML = getSlideContent(currentSlide);
            const slideTitle = translations[currentLang].slides[`title${currentSlide+1}`] || "Slide";
            document.getElementById('slide-number-label').innerText = `${slideTitle} (${currentSlide + 1}/${totalSlides})`;
            
            const progress = ((currentSlide) / (totalSlides - 1)) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            lucide.createIcons();
            if (currentSlide === 2) { setTimeout(initSlideChart, 100); }
        }

        function nextSlide() { if (currentSlide < totalSlides - 1) { currentSlide++; renderSlide(); } }
        function prevSlide() { if (currentSlide > 0) { currentSlide--; renderSlide(); } }

        function downloadCSV() {
            let csvContent = "data:text/csv;charset=utf-8,Month,Inflow,Outflow,Highlight,Info\n";
            dataConsolidada.forEach(row => {
                const highlight = row.destaque[currentLang];
                csvContent += `${row.mes},${row.entradas},${row.saidas},"${highlight}","${row.info}"\n`;
            });
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `ProBrasil_Report_2025_${currentLang}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function initMainChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dataConsolidada.map(d => d.mes),
                    datasets: [
                        { label: translations[currentLang].legendIn, data: dataConsolidada.map(d => d.entradas), borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', fill: true, tension: 0.4 },
                        { label: translations[currentLang].legendOut, data: dataConsolidada.map(d => d.saidas), borderColor: '#3b82f6', backgroundColor: 'rgba(59, 130, 246, 0.1)', fill: true, tension: 0.4 }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: true, position: 'top' } } }
            });
        }

        function initSlideChart() {
            const ctx = document.getElementById('slideChart');
            if(!ctx) return;
            new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: dataConsolidada.map(d => d.mes),
                    datasets: [
                        { label: translations[currentLang].legendIn, data: dataConsolidada.map(d => d.entradas), backgroundColor: '#10b981', borderRadius: 8 },
                        { label: translations[currentLang].legendOut, data: dataConsolidada.map(d => d.saidas), backgroundColor: '#3b82f6', borderRadius: 8 }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
            });
        }

        function initTimeline() {
            const list = document.getElementById('timeline-list');
            list.innerHTML = dataConsolidada.slice().reverse().map(item => `
                <div class="flex space-x-4 p-3 hover:bg-slate-50 rounded-xl transition-colors">
                    <div class="w-12 h-12 bg-white text-slate-800 rounded-xl flex items-center justify-center font-black text-xs border border-slate-100 shadow-sm flex-shrink-0">${item.mes}</div>
                    <div>
                        <p class="text-sm font-bold text-slate-800">${item.destaque[currentLang]}</p>
                        <p class="text-xs text-slate-500 line-clamp-1">${item.info}</p>
                    </div>
                </div>
            `).join('');
        }

        document.addEventListener('keydown', (e) => {
            if (document.getElementById('presentation-view').classList.contains('hidden')) return;
            if (e.key === 'ArrowRight') nextSlide();
            if (e.key === 'ArrowLeft') prevSlide();
            if (e.key === 'Escape') toggleView('dashboard');
        });

        window.onload = () => {
            lucide.createIcons();
            initMainChart();
            initTimeline();
            setLang('pt');
        };
    </script>
</body>
</html>
